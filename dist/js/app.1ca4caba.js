(function(e){function t(t){for(var a,i,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)i=o[d],n[i]&&m.push(n[i][0]),n[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=s[0]))}return e}var a={},n={app:0},r=[];function i(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=a,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0cfb":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container",attrs:{id:"app"}},[e.isAuthenticated?s("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.onClickLogout(t)}}},[e._v("Logout")]):e._e(),s("router-view",{attrs:{isAuthenticated:e.isAuthenticated}}),s("vue-progress-bar")],1)},r=[],i=s("2f62"),o=s("bc3a"),l=s.n(o);a["a"].use(i["a"]);var c="https://hodory-user-management.herokuapp.com",u=function(){var e=localStorage["user-management.accesstoken"];e&&(l.a.defaults.headers.common["Authorization"]="Bearer ".concat(e))};u();var d=new i["a"].Store({state:{accessToken:null},getters:{},mutations:{LOGIN:function(e,t){var s=t.accessToken;e.accessToken=s,localStorage.setItem("user-management.accesstoken",s)},LOGOUT:function(e){e.accessToken=null,localStorage.removeItem("user-management.accesstoken")}},actions:{LOGIN:function(e,t){var s=e.commit,a=t.email,n=t.password;return l.a.post("".concat(c,"/v1/auth/login"),{email:a,password:n}).then(function(e){var t=e.data;s("LOGIN",t),l.a.defaults.headers.common["Authorization"]="Bearer ".concat(t.accessToken)})},LOGOUT:function(e){var t=e.commit;l.a.defaults.headers.common["Authorization"]=void 0,t("LOGOUT")}}}),m={name:"app",computed:{isAuthenticated:function(){return!(null===d.state.accessToken&&!localStorage.getItem("user-management.accesstoken"))}},methods:{onClickLogout:function(){var e=this;d.dispatch("LOGOUT").then(function(){return e.$router.push("/")})}},mounted:function(){this.$Progress.finish()},created:function(){var e=this;this.$Progress.start(),this.$router.beforeEach(function(t,s,a){if(void 0!==t.meta.progress){var n=t.meta.progress;e.$Progress.parseMeta(n)}e.$Progress.start(),a()}),this.$router.afterEach(function(t,s){e.$Progress.finish()})}},p=m,f=(s("cf25"),s("2877")),v=Object(f["a"])(p,n,r,!1,null,null,null),h=v.exports,_=s("8c4f"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isEditable?s("div",{staticClass:"field is-grouped"},[s("div",{staticClass:"control",on:{click:e._onClickInsert}},[s("button",{staticClass:"button is-link"},[e._v("회원 등록")])])]):e._e(),e.isUserExists?s("div",e._l(e.users,function(t,a){return s("UserCard",{key:a,attrs:{user:t},nativeOn:{click:function(t){return e._onClick(a)}}})}),1):e._e(),s("div",{staticClass:"modal",class:{"is-active":e.isOpenModal}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[e._v("회원 "+e._s(e._statusText))]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){return e._changeModalStatus(!1)}}})]),s("section",{staticClass:"modal-card-body"},[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("회원 ID")]),s("div",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectedUser.userId,expression:"selectedUser.userId",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"email",placeholder:"email",readonly:e.isUpdate||!e._isEditable},domProps:{value:e.selectedUser.userId},on:{input:function(t){t.target.composing||e.$set(e.selectedUser,"userId",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(0),e._m(1)])]),e.isUpdate?e._e():[s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("패스워드")]),s("div",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._m(2),e._m(3)])])],s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("회원명")]),s("div",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectedUser.name,expression:"selectedUser.name",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Username",readonly:!e._isEditable},domProps:{value:e.selectedUser.name},on:{input:function(t){t.target.composing||e.$set(e.selectedUser,"name",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(4)])]),s("div",{staticClass:"field"},[s("label",{staticClass:"label"},[e._v("등급")]),s("div",{staticClass:"control"},[e._isMaster?s("p",{staticClass:"is-success"},[e._v("Master")]):e._isEditable?s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model.number",value:e.selectedUser.level,expression:"selectedUser.level",modifiers:{number:!0}}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(t){var s="_value"in t?t._value:t.value;return e._n(s)});e.$set(e.selectedUser,"level",t.target.multiple?s:s[0])}}},e._l(e.levels,function(t,a){return a<e.loginUser.level?s("option",{key:a,domProps:{value:a}},[e._v("\n                                    "+e._s(t)+"\n\n                                ")]):e._e()}),0)]):s("p",{staticClass:"is-success"},[e._v(e._s(e.levels[e.selectedUser.level]))])])]),e._isEditable?s("div",{staticClass:"is-grouped"},[s("p",{staticClass:"buttons"},[s("a",{staticClass:"button is-success",on:{click:function(t){return t.preventDefault(),e._onSubmit()}}},[e._m(5),s("span",[e._v(e._s(e._statusText))])]),s("a",{staticClass:"button is-danger is-outlined",on:{click:function(t){return t.preventDefault(),e._onDelete()}}},[e._m(6),s("span",[e._v("삭제")])]),s("a",{staticClass:"button",on:{click:function(t){return t.preventDefault(),e._changeModalStatus(!1)}}},[s("span",[e._v("취소")])])])]):e._e()],2)])])])},b=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-envelope"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fas fa-check"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-lock"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fas fa-check"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-user"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-check"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-times"})])}],C=(s("7f7f"),s("96cf"),s("3b8d")),U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"box"},[s("article",{staticClass:"media"},[s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("p",[s("strong",[e._v(e._s(e.user.name))]),e._v(" #"+e._s(e.levelText)+"\n                    "),s("br"),s("small",[e._v(e._s(e.user.userId))]),s("br"),s("small",[e._v("가입일자: "+e._s(e._toLocalTime(e.user.createdAt)))]),s("br"),e.user.updatedAt?[s("small",[e._v("수정시간: "+e._s(e._toLocalTime(e.user.updatedAt)))]),s("br")]:e._e()],2)])])])])},k=[],w=s("5a0c"),y={name:"UserCard",props:["user"],methods:{_toLocalTime:function(e){return w(e).format("YYYY-MM-DD HH:mm:ss")}},computed:{levelText:function(){switch(this.user.level){case 1:return"Bronze";case 2:return"Silver";case 3:return"Gold";case 4:return"Platinum";case 5:return"Diamond";case 99:return"Master"}return this.user.level}}},x=y,O=Object(f["a"])(x,U,k,!1,null,"8b769ac6",null),$=O.exports,E={name:"UserList",components:{UserCard:$},data:function(){return{users:[],selectedUser:{id:0,level:1,name:null,updatedAt:null,userId:null},isUpdate:!1,isOpenModal:!1,endPoint:"https://hodory-user-management.herokuapp.com",loginUser:{level:0},levels:{1:"Bronze",2:"Silver",3:"Gold",4:"Platinum",5:"Diamond"},password:null}},methods:{_onClick:function(e){this.selectedUser=Object.assign({},this.users[e]),this.isUpdate=!0,this._changeModalStatus(!0)},_changeModalStatus:function(e){e||(this.isUpdate=!1,this._resetSelectedUser()),this.isOpenModal=e},_onClickInsert:function(){this.isUpdate=!1,this._resetSelectedUser(),this.isOpenModal=!0},_resetSelectedUser:function(){this.selectedUser={level:1,name:null,updatedAt:null,userId:null}},_refresh:function(){this._changeModalStatus(!1),this._resetSelectedUser(),this._getUsers()},_getUsers:function(){var e=this;o["get"]("".concat(this.endPoint,"/v1/users/list")).then(function(t){var s=t.data.data;e.users=s.userList},function(e){alert("데이터 조회에 오류가 발생했습니다.".concat(e.response.data.message))})},_authMe:function(){var e=this;o["get"]("".concat(this.endPoint,"/v1/auth/me")).then(function(t){var s=t.data.data;e.loginUser=s},function(e){alert("로그인 정보 조회에 오류가 발생했습니다.".concat(e.response.data.message))})},_onSubmit:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this._isEditable){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.isUpdate){e.next=14;break}return e.prev=3,e.next=6,o["patch"]("https://hodory-user-management.herokuapp.com/v1/users/".concat(this.selectedUser.id),{id:this.selectedUser.userId,name:this.selectedUser.name,level:this.selectedUser.level});case 6:this._refresh(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),alert(e.t0.response.data.message);case 12:e.next=23;break;case 14:return e.prev=14,e.next=17,o["post"]("https://hodory-user-management.herokuapp.com/v1/users",{id:this.selectedUser.userId,password:this.password,name:this.selectedUser.name,level:this.selectedUser.level});case 17:this._refresh(),e.next=23;break;case 20:e.prev=20,e.t1=e["catch"](14),alert(e.t1.response.data.message);case 23:case"end":return e.stop()}},e,this,[[3,9],[14,20]])}));function t(){return e.apply(this,arguments)}return t}(),_onDelete:function(){var e=Object(C["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["delete"]("https://hodory-user-management.herokuapp.com/v1/users/".concat(this.selectedUser.id));case 3:this._refresh(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),alert(e.t0.response.data.message);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this._authMe(),this._getUsers()},computed:{isUserExists:function(){return this.users.length>0},isEditable:function(){return this.loginUser&&this.loginUser.level>4},_statusText:function(){return this.isUpdate?"수정":"등록"},_isMaster:function(){return 99===this.selectedUser.level},_isEditable:function(){return this.isEditable&&this.loginUser.level>this.selectedUser.level}}},S=E,P=Object(f["a"])(S,g,b,!1,null,"36d5e84a",null),T=P.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isAuthenticated?s("router-link",{attrs:{to:"/user/list"}},[e._v("회원 목록")]):s("div",[s("h2",[e._v("Login")]),s("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(e.email,e.password)}}},[s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email Address"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._m(0),e._m(1)])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._m(2)])]),s("div",[e._v(e._s(e.msg))]),e._m(3)])])],1)},M=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-envelope"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fas fa-check"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-lock"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"field"},[s("p",{staticClass:"control"},[s("button",{staticClass:"button is-success",attrs:{type:"submit"}},[e._v("\n                        Login\n                    ")])])])}],L=(s("a481"),s("28a5"),s("386d"),{name:"Login",data:function(){return{email:"",password:"",msg:""}},props:["isAuthenticated"],methods:{onSubmit:function(e,t){var s=this;this.$store.dispatch("LOGIN",{email:e,password:t}).then(function(){return s.redirect()}).catch(function(e){e.response?204===e.response.statusCode?s.msg="회원을 찾을 수 없습니다.":(s.statusCode=e.response.data.statusCode,s.msg=e.response.data.message):s.redirect()})},redirect:function(){var e=window.location.search,t=e.replace(/^\?/,"").split("&"),s=t.reduce(function(e,t){var s=t.split("=");return e[s[0]]=decodeURIComponent(s[1]),e},{}),a=s.returnPath;this.$router.push(a||"/user/list")}}}),A=L,j=Object(f["a"])(A,I,M,!1,null,null,null),D=j.exports;a["a"].use(_["a"]);var G=function(){return function(e,t,s){var a=!!localStorage.getItem("user-management.accesstoken");if(a)return null===d.state.accessToken&&(d.state.accessToken=localStorage.getItem("user-management.accesstoken")),s();s("/?returnPath=user/list")}},N=new _["a"]({mode:"history",routes:[{path:"/",name:"Home",component:D},{path:"/user/list",name:"UserList",component:T,beforeEnter:G(),meta:{progress:{func:[{call:"color",modifier:"temp",argument:"#ffb000"},{call:"fail",modifier:"temp",argument:"#6e0000"},{call:"location",modifier:"temp",argument:"top"},{call:"transition",modifier:"temp",argument:{speed:"1.5s",opacity:"0.6s",termination:400}}]}}}]}),R=s("26b9"),z=s.n(R),B={color:"#bffaf3",failedColor:"#874b4b",thickness:"5px",transition:{speed:"0.2s",opacity:"0.6s",termination:300},autoRevert:!0,location:"left",inverse:!1};a["a"].use(z.a,B);var Y=z.a;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(h)},store:d,router:N,progressBar:Y}).$mount("#app")},cf25:function(e,t,s){"use strict";var a=s("0cfb"),n=s.n(a);n.a}});
//# sourceMappingURL=app.1ca4caba.js.map